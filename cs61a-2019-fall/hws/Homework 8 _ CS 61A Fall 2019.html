<!DOCTYPE html>
<!-- saved from url=(0026)https://cs61a.org/hw/hw08/ -->
<html lang="en" style="overflow: visible;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="CS 61A: Structure and Interpretation of Computer Programs">
    <meta name="keywords" content="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS">
    <meta name="author" content="John DeNero">
    
    <meta name="viewport" content="width=device-width">

    <script src="./Homework 8 _ CS 61A Fall 2019_files/jquery.min.js.下载"></script>
    <script src="./Homework 8 _ CS 61A Fall 2019_files/bootstrap.min.js.下载"></script>
    <script src="./Homework 8 _ CS 61A Fall 2019_files/highlight.min.js.下载"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="stylesheet" href="./Homework 8 _ CS 61A Fall 2019_files/bootstrap.min.css">
    <link rel="stylesheet" href="./Homework 8 _ CS 61A Fall 2019_files/css">
    <link rel="stylesheet" href="./Homework 8 _ CS 61A Fall 2019_files/style.css">
    <link rel="stylesheet" href="./Homework 8 _ CS 61A Fall 2019_files/mono-blue.css">
    <link rel="icon" href="https://cs61a.org/assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="./Homework 8 _ CS 61A Fall 2019_files/hw.css">


    <title>
Homework 8 | CS 61A Fall 2019
</title>
  <script charset="utf-8" src="chrome-extension://jgphnjokjhjlcnnajmfjlacjnjkhleah/js/btype.js"></script><script type="text/javascript" charset="utf-8" src="chrome-extension://jgphnjokjhjlcnnajmfjlacjnjkhleah/js/chrome.js"></script></head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://cs61a.org/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="./Homework 8 _ CS 61A Fall 2019_files/logo.png">
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://cs61a.org/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours.html">Office Hours</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/hw/hw08/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/instructor.html">Instructors</a></li>
                <li><a href="https://cs61a.org/TAs.html">TAs</a></li>
                <li><a href="https://cs61a.org/tutors.html">Tutors</a></li>
                <li><a href="https://cs61a.org/academic-interns.html">Academic Interns</a></li>
              </ul>
            </li>
            <li><a href="https://cs61a.org/resources.html">Resources</a></li>
            <li><a href="https://cs61a.org/articles/about.html">Syllabus</a></li>
            <li><a href="https://piazza.com/berkeley/fall2019/cs61a" target="_blank">Piazza</a></li>
            <li><a href="https://cs61a.org/extra.html">Extra</a></li>
            <!-- <li><a href="https://scheme.cs61a.org">Scheme</a></li> -->
            <!-- <li><a href="https://sql.cs61a.org">SQL</a></li> -->
            <li><a href="https://code.cs61a.org/">Code</a></li>
            <li><a href="http://tutor.cs61a.org/">Tutor</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class="row">
  <div class="col-md-9 __reader_view_article_wrap_7198645119289175__">
    <header>
      <h1>
        
Homework 8: 

        
        
        <ul class="inline-block list-inline">
          <li><a href="https://cs61a.org/hw/hw08/hw08.zip" class="label label-outline">hw08.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    

<p><em>Due by 11:59pm on Thursday, November 14</em></p>





<h2>Instructions</h2>



<p><strong>Submission:</strong> When you are done, submit with <code>python3 ok
  --submit</code>.  You may submit more than once before the deadline; only the
final submission will be scored. Check that you have successfully submitted
your code on <a href="https://okpy.org/">okpy.org</a>.  See <a href="https://cs61a.org/lab/lab00#submitting-the-assignment">Lab 0</a> for more instructions on
submitting assignments.</p>

<p><strong>Using Ok:</strong> If you have any questions about using Ok, please
refer to <a href="https://cs61a.org/articles/using-ok.html">this guide.</a>



</p><p><strong>Grading:</strong> Homework is graded based on effort, not
correctness.  However, there is no partial credit; you must show substantial
effort on every problem to receive any points.
<strong>This homework is out of 2 points.</strong>




    
</p><h2 id="macros">Macros</h2>


<h3 class="question" id="q1">Q1: List Comprehensions</h3>

<p>Recall that list comprehensions in Python allow us to create lists out of
iterables:</p>

<pre><code class="hljs xml">[<span class="hljs-tag">&lt;<span class="hljs-name">map-expression</span>&gt;</span> for <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span> in <span class="hljs-tag">&lt;<span class="hljs-name">iterable</span>&gt;</span> if <span class="hljs-tag">&lt;<span class="hljs-name">conditional-expression</span>&gt;</span>]</code></pre>

<p>Use a macro to implement list comprehensions in Scheme that can create lists
out of lists. Specifically, we want a <code>list-of</code> macro that can be called as
follows:</p>

<pre><code class="hljs cpp">(<span class="hljs-built_in">list</span>-of &lt;<span class="hljs-built_in">map</span>-expression&gt; <span class="hljs-keyword">for</span> &lt;name&gt; in &lt;<span class="hljs-built_in">list</span>&gt; <span class="hljs-keyword">if</span> &lt;conditional-expression&gt;)</code></pre>

<p>Calling <code>list-of</code> will return a new list constructed by doing the following for
each element in <code>&lt;list&gt;</code>:</p>

<ul>
  <li>Bind <code>&lt;name&gt;</code> to the element.</li>
  <li>If <code>&lt;conditional-expression&gt;</code> evaluates to a truth-y value, evaluate
  <code>&lt;map-expression&gt;</code> and add it to the result list.</li>
</ul>

<p>Here are some examples:</p>

<pre><code class="hljs shell"><span class="hljs-meta">scm&gt;</span><span class="bash"> (list-of (* x x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-string">'(3 4 5) if (odd? x))</span></span>
(9 25)
<span class="hljs-meta">scm&gt;</span><span class="bash"><span class="hljs-string"> (list-of '</span>hi <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-string">'(1 2 3 4 5 6) if (= (modulo x 3) 0))</span></span>
(hi hi)
<span class="hljs-meta">scm&gt;</span><span class="bash"><span class="hljs-string"> (list-of (car e) for e in '</span>((10) 11 (12) 13 (14 15)) <span class="hljs-keyword">if</span> (list? e))</span>
(10 12 14)</code></pre>

<blockquote><p><em>Hint:</em> You may use the built-in <code>map</code> and <code>filter</code> procedures. Check out the
<a href="https://cs61a.org/articles/scheme-builtins.html">Scheme Built-ins</a> reference for more
information.</p>

<p>You may find it helpful to refer to the <code>for</code> loop macro introduced in
lecture. The filter expression should be transformed using a <code>lambda</code> in a
similar way to the map expression in the example.</p></blockquote>

<solution>

<pre><code class="hljs coffeescript">(define-macro (list-<span class="hljs-keyword">of</span> map-expr <span class="hljs-keyword">for</span> var <span class="hljs-keyword">in</span> lst <span class="hljs-keyword">if</span> filter-expr)
  <span class="hljs-string">'YOUR-CODE-HERE
)</span></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q list-comp</code></pre>

<p><strong>Optional (not graded):</strong> Recall also that the <code>if &lt;conditional&gt;</code> portion of
the Python list comprehension was optional. Modify your macro so that the
Scheme list comprehension does not require a conditional expression.</p>

<p>Refer to the <a href="https://cs61a.org/articles/scheme-spec.html#define-x2d-macro">macro form</a> in the
Scheme Specification for an explanation of how to do optional macro parameters.</p>




<h1 id="just-for-fun-question">Just For Fun Question</h1>


<blockquote><p>These questions are neither required nor in scope. They are just for fun!</p></blockquote>

<h3 class="question" id="q2">Q2: Quine</h3>

<p>Write a one-line program that prints itself, using only the following features
of the Python language:</p>

<ul>
  <li>Number literals</li>
  <li>Assignment statements</li>
  <li>String literals that can be expressed using single or double quotes</li>
  <li>The arithmetic operators <code>+</code>, <code>-</code>, <code>*</code>, and <code>/</code></li>
  <li>The built-in <code>print</code> function</li>
  <li>The built-in <code>eval</code> function, which evaluates a string as a Python expression</li>
  <li>The built-in <code>repr</code> function, which returns an expression that evaluates to its argument</li>
</ul>

<p>You can concatenate two strings by adding them together with <code>+</code> and repeat a
string by multipying it by an integer. Semicolons can be used to separate
multiple statements on the same line. E.g.,</p>

<pre><code class="hljs shell"><span class="hljs-meta">&gt;</span><span class="bash">&gt;&gt; c=<span class="hljs-string">'c'</span>;<span class="hljs-built_in">print</span>(<span class="hljs-string">'a'</span>);<span class="hljs-built_in">print</span>(<span class="hljs-string">'b'</span> + c * 2)</span>
a
bcc</code></pre>

<blockquote><p><strong>Hint</strong>: Explore the relationship between single quotes, double quotes, and the
<code>repr</code> function applied to strings.</p></blockquote>

<p>A program that prints itself is called a Quine. Place your solution in the multi-line string named <code>quine</code>.</p>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q quine_test</code></pre>

<script>
/*
This code is duplicated in lab-check-in.html. Doesn't work if we move it to a separate
file because of JQuery document ready concurrency issues.
*/
$(function() {
  $('.alwaystoggle').css('display', 'inline-block');
  $('.alwaystoggle').click(function() {
    var solution_id = $(this).attr('id');
    $('div.' + solution_id).slideToggle(600);
  });
});
</script>


  </div>

  <div class="col-md-3 sticky">
    <nav class="hidden-print hidden-sm hidden-xs sidebar">
      <ul class="nav nav-stacked noselect">
  <li><a href="https://cs61a.org/hw/hw08/#macros">Macros</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/hw08/#q1">Q1: List Comprehensions</a></li>
  </ul>
  <li><a href="https://cs61a.org/hw/hw08/#just-for-fun-question">Just For Fun Question</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/hw/hw08/#q2">Q2: Quine</a></li>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours.html">Office Hours</a></li>
            <li><a href="https://cs61a.org/staff.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/resources.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/studying.html">Studying Guide</a></li>
            <li><a href="https://cs61a.org/articles/debugging.html">Debugging Guide</a></li>
            <li><a href="https://cs61a.org/articles/composition.html">Composition Guide</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/articles/about.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/about.html#assignments">Assignments</a></li>
            <li><a href="https://cs61a.org/articles/about.html#exams">Exams</a></li>
            <li><a href="https://cs61a.org/articles/about.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    console.log(target);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      // window.scrollTo(0, 0);
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    event.preventDefault();
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      goToId(this.hash);
      document.location.hash = this.hash;
    } else {
      window.open(this.href);
    }
  });
</script>

  
<div id="download_plus_animation"></div></body></html>