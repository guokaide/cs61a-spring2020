<!DOCTYPE html>
<!-- saved from url=(0028)https://cs61a.org/lab/lab06/ -->
<html lang="en" style="overflow: visible;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="CS 61A: Structure and Interpretation of Computer Programs">
    <meta name="keywords" content="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS">
    <meta name="author" content="John DeNero">
    
    <meta name="viewport" content="width=device-width">

    <script src="./Lab 6_ Nonlocal &amp; Object-Oriented Programming _ CS 61A Fall 2019_files/jquery.min.js.下载"></script>
    <script src="./Lab 6_ Nonlocal &amp; Object-Oriented Programming _ CS 61A Fall 2019_files/bootstrap.min.js.下载"></script>
    <script src="./Lab 6_ Nonlocal &amp; Object-Oriented Programming _ CS 61A Fall 2019_files/highlight.min.js.下载"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link rel="stylesheet" href="./Lab 6_ Nonlocal &amp; Object-Oriented Programming _ CS 61A Fall 2019_files/bootstrap.min.css">
    <link rel="stylesheet" href="./Lab 6_ Nonlocal &amp; Object-Oriented Programming _ CS 61A Fall 2019_files/css">
    <link rel="stylesheet" href="./Lab 6_ Nonlocal &amp; Object-Oriented Programming _ CS 61A Fall 2019_files/style.css">
    <link rel="stylesheet" href="./Lab 6_ Nonlocal &amp; Object-Oriented Programming _ CS 61A Fall 2019_files/mono-blue.css">
    <link rel="icon" href="https://cs61a.org/assets/images/favicon.ico">

    

    <title>
Lab 6: Nonlocal &amp; Object-Oriented Programming | CS 61A Fall 2019
</title>
  <script charset="utf-8" src="chrome-extension://jgphnjokjhjlcnnajmfjlacjnjkhleah/js/btype.js"></script><script type="text/javascript" charset="utf-8" src="chrome-extension://jgphnjokjhjlcnnajmfjlacjnjkhleah/js/chrome.js"></script></head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://cs61a.org/">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="./Lab 6_ Nonlocal &amp; Object-Oriented Programming _ CS 61A Fall 2019_files/logo.png">
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://cs61a.org/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours.html">Office Hours</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="https://cs61a.org/lab/lab06/#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="https://cs61a.org/instructor.html">Instructors</a></li>
                <li><a href="https://cs61a.org/TAs.html">TAs</a></li>
                <li><a href="https://cs61a.org/tutors.html">Tutors</a></li>
                <li><a href="https://cs61a.org/academic-interns.html">Academic Interns</a></li>
              </ul>
            </li>
            <li><a href="https://cs61a.org/resources.html">Resources</a></li>
            <li><a href="https://cs61a.org/articles/about.html">Syllabus</a></li>
            <li><a href="https://piazza.com/berkeley/fall2019/cs61a" target="_blank">Piazza</a></li>
            <li><a href="https://cs61a.org/extra.html">Extra</a></li>
            <!-- <li><a href="https://scheme.cs61a.org">Scheme</a></li> -->
            <!-- <li><a href="https://sql.cs61a.org">SQL</a></li> -->
            <li><a href="https://code.cs61a.org/">Code</a></li>
            <li><a href="http://tutor.cs61a.org/">Tutor</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class="row">
  <div class="col-md-9 __reader_view_article_wrap_48004621157546956__">
    <header>
      <h1>
        
Lab 6: Nonlocal &amp; Object-Oriented Programming

        
        
        <ul class="inline-block list-inline">
          <li><a href="https://cs61a.org/lab/lab06/lab06.zip" class="label label-outline">lab06.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    

<p><i>Due by 11:59pm on Monday, October 14.</i></p>




<h2 id="starter-files">Starter Files</h2>

<p>Download <a href="https://cs61a.org/lab/lab06/lab06.zip">lab06.zip</a>.
Inside the archive, you will find starter files for the questions in this lab,
  along with a copy of the <a href="https://cs61a.org/lab/lab06/ok">Ok</a> autograder.</p>


<h2 id="submission">Submission</h2>

<p>By the end of this lab, you should have submitted the lab with
<code>python3 ok --submit</code>. You may submit more than once before the
deadline; only the final submission will be graded.
Check that you have successfully submitted your code on
<a href="https://okpy.org/">okpy.org</a>.</p>

<ul>
  <li>To receive credit for this lab, you must complete questions 1 through 4 and submit
  through Ok.</li>
  <li>The remaining questions are <strong>optional</strong>. It is recommended that you complete these
  problems in your own time.</li>
</ul>



    
<h1 id="topics">Topics</h1>


<p>Consult this section if you need a refresher on the material for this lab. It's okay to skip directly to the questions and refer back here should you get stuck.</p>


        <button id="toggle-1" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        Nonlocal<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">


<h2 id="nonlocal">Nonlocal</h2>


<p>We say that a variable defined in a frame is <em>local</em> to that frame. A variable
is <strong>nonlocal</strong> to a frame if it is defined in the environment that the frame
belongs to but not the frame itself, i.e. in its parent or ancestor frame.</p>

<p>So far, we know that we can access variables in parent frames:</p>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_adder</span><span class="hljs-params">(x)</span>:</span>
    <span class="hljs-string">""" Returns a one-argument function that returns the result of
    adding x and its argument. """</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">adder</span><span class="hljs-params">(y)</span>:</span>
        <span class="hljs-keyword">return</span> x + y
    <span class="hljs-keyword">return</span> adder</code></pre>

<p>Here, when we call <code>make_adder</code>, we create a function <code>adder</code> that is able to
look up the name <code>x</code> in <code>make_adder</code>'s frame and use its value.</p>

<p>However, we haven't been able to <em>modify</em> variable in parent frames.  Consider
the following function:</p>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_withdraw</span><span class="hljs-params">(balance)</span>:</span>
    <span class="hljs-string">"""Returns a function which can withdraw
    some amount from balance

    &gt;&gt;&gt; withdraw = make_withdraw(50)
    &gt;&gt;&gt; withdraw(25)
    25
    &gt;&gt;&gt; withdraw(25)
    0
    """</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">withdraw</span><span class="hljs-params">(amount)</span>:</span>
        <span class="hljs-keyword">if</span> amount &gt; balance:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Insufficient funds"</span>
        balance = balance - amount
        <span class="hljs-keyword">return</span> balance
    <span class="hljs-keyword">return</span> withdraw</code></pre>

<p>The inner function <code>withdraw</code> attempts to update the variable <code>balance</code> in its
parent frame. Running this function's doctests, we find that it causes the
following error:</p>

<pre><code class="hljs bash">UnboundLocalError: <span class="hljs-built_in">local</span> variable <span class="hljs-string">'balance'</span> referenced before assignment</code></pre>

<p>Why does this happen? When we execute an assignment statement, remember that we
are either creating a new binding in our current frame or we are updating an
old one in the current frame. For example, the line <code>balance = ...</code> in <code>withdraw</code>,
is creating the local variable <code>balance</code> inside <code>withdraw</code>'s frame. This
assignment statement tells Python to expect a variable called <code>balance</code> inside
<code>withdraw</code>'s frame, so Python will not look in parent frames for this variable.
However, notice that we tried to compute <code>balance - amount</code> before the local variable
was created! That's why we get the <code>UnboundLocalError</code>.</p>

<p>To avoid this problem, we introduce the <code>nonlocal</code> keyword. It allows us to
update a variable in a parent frame!</p>

<blockquote><p>Some important things to keep in mind when using <code>nonlocal</code></p>

<ul>
  <li><code>nonlocal</code> cannot be used with global variables (names defined in the
  global frame).</li>
  <li>If no nonlocal variable is found with the given name, a <code>SyntaxError</code> is
  raised.</li>
  <li>A name that is already local to a frame cannot be declared as nonlocal.</li>
</ul></blockquote>

<p>Consider this improved example:</p>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_withdraw</span><span class="hljs-params">(balance)</span>:</span>
    <span class="hljs-string">"""Returns a function which can withdraw
    some amount from balance

    &gt;&gt;&gt; withdraw = make_withdraw(50)
    &gt;&gt;&gt; withdraw(25)
    25
    &gt;&gt;&gt; withdraw(25)
    0
    """</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">withdraw</span><span class="hljs-params">(amount)</span>:</span>
        <span class="hljs-keyword">nonlocal</span> balance
        <span class="hljs-keyword">if</span> amount &gt; balance:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Insufficient funds"</span>
        balance = balance - amount
        <span class="hljs-keyword">return</span> balance
    <span class="hljs-keyword">return</span> withdraw</code></pre>

<p>The line <code>nonlocal balance</code> tells Python that <code>balance</code> will not be local to this frame, so it will look for it in parent frames. Now we can update <code>balance</code> without running into problems.</p>

</div>

<br>


        <button id="toggle-2" class="btn btn-outline btn-lg alwaystoggle toggle" style="display: inline-block;">
        Object Oriented Programming<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-2">


<h2 id="object-oriented-programming">Object-Oriented Programming</h2>


<p><strong>Object-oriented programming</strong> (OOP) is a style of programming that
allows you to think of code in terms of "objects." Here's an example of
a <code>Car</code> class:</p>

<pre><code class="hljs ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span>(<span class="hljs-title">object</span>):</span>
    num_wheels = <span class="hljs-number">4</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, color)</span></span>:
        <span class="hljs-keyword">self</span>.wheels = Car.num_wheels
        <span class="hljs-keyword">self</span>.color = color

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">drive</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.wheels &lt;= Car.<span class="hljs-symbol">num_wheels:</span>
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.color + <span class="hljs-string">' car cannot drive!'</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.color + <span class="hljs-string">' car goes vroom!'</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop_tire</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.wheels &gt; <span class="hljs-number">0</span>:
            <span class="hljs-keyword">self</span>.wheels -= <span class="hljs-number">1</span></code></pre>

<p>Here's some terminology:</p>

<ul>
  <li><strong>class</strong>: a blueprint for how to build a certain type of object.
  The <code>Car</code> class (shown above) describes the behavior and data that
  all <code>Car</code> objects have.</li>
  <li><p><strong>instance</strong>: a particular occurrence of a class. In Python, we
  create instances of a class like this:</p>

<pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span>&gt; my_car = Car(<span class="hljs-string">'red'</span>)</code></pre>

  <p><code>my_car</code> is an instance of the <code>Car</code> class.</p></li>
  <li><p><strong>attribute</strong> or <strong>field</strong>: a variable that belongs to the class.
  Think of an attribute as a quality of the object: cars have <em>wheels</em>
  and <em>color</em>, so we have given our <code>Car</code> class <code>self.wheels</code> and
  <code>self.color</code> attributes. We can access attributes using <strong>dot
  notation</strong>:</p>

<pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span>&gt; my_car.color
<span class="hljs-string">'red'</span>
<span class="hljs-meta">&gt;&gt;</span>&gt; my_car.wheels
<span class="hljs-number">4</span></code></pre></li>
  <li><p><strong>method</strong>: Methods are just like normal functions, except that they
  are tied to an instance or a class. Think of a method as a "verb" of
  the class: cars can <em>drive</em> and also <em>pop their tires</em>, so we have
  given our <code>Car</code> class the methods <code>drive</code> and <code>pop_tire</code>. We call
  methods using <strong>dot notation</strong>:</p>

<pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span>&gt; my_car = Car(<span class="hljs-string">'red'</span>)
<span class="hljs-meta">&gt;&gt;</span>&gt; my_car.drive()
<span class="hljs-string">'red car goes vroom!'</span></code></pre></li>
  <li><p><strong>constructor</strong>: As with data abstraction, constructors describe how
  to build an instance of the class. Most classes have a constructor.
  In Python, the constructor of the class defined as <code>__init__</code>.  For
  example, here is the <code>Car</code> class's constructor:</p>

<pre><code class="hljs ruby"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, color)</span></span>:
    <span class="hljs-keyword">self</span>.wheels = Car.num_wheels
    <span class="hljs-keyword">self</span>.color = color</code></pre>

  <p>The constructor takes in one argument, <code>color</code>. As you can see, the
  constructor also creates the <code>self.wheels</code> and <code>self.color</code> attributes.</p></li>
  <li><p><code>self</code>: in Python, <code>self</code> is the first parameter for many methods
  (in this class, we will only use methods whose first parameter is
  <code>self</code>). When a method is called, <code>self</code> is bound to an instance of
  the class. For example:</p>

<pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span>&gt; my_car = Car(<span class="hljs-string">'red'</span>)
<span class="hljs-meta">&gt;&gt;</span>&gt; car.drive()</code></pre>

  <p>Notice that the <code>drive</code> method takes in <code>self</code> as an argument, but it
  looks like we didn't pass one in! This is because the dot notation
  <em>implicitly</em> passes in <code>car</code> as <code>self</code> for us.</p></li>
</ul>

</div>

<br>


<h1 id="required-questions">Required Questions</h1>



<h2 id="nonlocal-codewriting">Nonlocal Codewriting</h2>


<p>For the following question, write your code in <code>lab06.py</code>.</p>

<h3 class="question" id="q1">Q1: Make Adder Increasing</h3>

<p>Write a function which takes in an integer <code>n</code> and returns a one-argument function. 
This function should take in some value <code>x</code> and return <code>n + x</code> the first time it is called, 
similar to <code>make_adder</code>. The second time it is called, however, it should return <code>n + x + 1</code>, 
then <code>n + x + 2</code> the third time, and so on.</p>



<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">make_adder_inc</span><span class="hljs-params">(n)</span>:</span>
    <span class="hljs-string">"""
    &gt;&gt;&gt; adder1 = make_adder_inc(5)
    &gt;&gt;&gt; adder2 = make_adder_inc(6)
    &gt;&gt;&gt; adder1(2) 
    7
    &gt;&gt;&gt; adder1(2) # 5 + 2 + 1
    8
    &gt;&gt;&gt; adder1(10) # 5 + 10 + 2
    17
    &gt;&gt;&gt; [adder1(x) for x in [1, 2, 3]]
    [9, 11, 13]
    &gt;&gt;&gt; adder2(5)
    11
    """</span>
<div class="alt solution-1">    <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</div><div class="solution solution-1">    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">adder</span><span class="hljs-params">(x)</span>:</span>
        <span class="hljs-keyword">nonlocal</span> n
        value = n + x
        n = n + <span class="hljs-number">1</span>
        <span class="hljs-keyword">return</span> value
    <span class="hljs-keyword">return</span> adder</div></code></pre>


        <button id="solution-1" class="btn btn-outline btn-lg solutiontoggle solution" style="display: inline-block;">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q make_adder_inc</code></pre>


<h2 id="wwpd">WWPD</h2>


<h3 class="question" id="q2">Q2: Using the Car class</h3>

<p>Here is the full definition of the <code>Car</code> class from the
car example above in <code>car.py</code>:</p>

<pre><code class="hljs ruby"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span>(<span class="hljs-title">object</span>):</span>
    num_wheels = <span class="hljs-number">4</span>
    gas = <span class="hljs-number">30</span>
    headlights = <span class="hljs-number">2</span>
    size = <span class="hljs-string">'Tiny'</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, make, model)</span></span>:
        <span class="hljs-keyword">self</span>.make = make
        <span class="hljs-keyword">self</span>.model = model
        <span class="hljs-keyword">self</span>.color = <span class="hljs-string">'No color yet. You need to paint me.'</span>
        <span class="hljs-keyword">self</span>.wheels = Car.num_wheels
        <span class="hljs-keyword">self</span>.gas = Car.gas

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">paint</span><span class="hljs-params">(<span class="hljs-keyword">self</span>, color)</span></span>:
        <span class="hljs-keyword">self</span>.color = color
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.make + <span class="hljs-string">' '</span> + <span class="hljs-keyword">self</span>.model + <span class="hljs-string">' is now '</span> + color

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">drive</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.wheels &lt; Car.num_wheels <span class="hljs-keyword">or</span> <span class="hljs-keyword">self</span>.gas &lt;= <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">'Cannot drive!'</span>
        <span class="hljs-keyword">self</span>.gas -= <span class="hljs-number">10</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span>.make + <span class="hljs-string">' '</span> + <span class="hljs-keyword">self</span>.model + <span class="hljs-string">' goes vroom!'</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop_tire</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.wheels &gt; <span class="hljs-number">0</span>:
            <span class="hljs-keyword">self</span>.wheels -= <span class="hljs-number">1</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fill_gas</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span>:
        <span class="hljs-keyword">self</span>.gas += <span class="hljs-number">20</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">'Gas level: '</span> + str(<span class="hljs-keyword">self</span>.gas)</code></pre>

<blockquote><p>Use Ok to test your knowledge with the following What would Python Display
questions.</p>

<pre><code class="hljs nginx"><span class="hljs-attribute">python3</span> ok -q car -u</code></pre>

<p>If an error occurs, type Error. If nothing is displayed, type Nothing.</p></blockquote>

<!--

<blockquote><pre><code>python3 ok &#x2d;q food_truck &#x2d;u</code></pre>

<p>--><p></p>

<!-- <pre><code>&gt;&gt;&gt; garcias_car = Car(&#x27;Tesla&#x27;, &#x27;Model S&#x27;)
&gt;&gt;&gt; garcias_car.color
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x27;&#x4e;&#x6f;&#x20;&#x63;&#x6f;&#x6c;&#x6f;&#x72;&#x20;&#x79;&#x65;&#x74;&#x2e;&#x20;&#x59;&#x6f;&#x75;&#x20;&#x6e;&#x65;&#x65;&#x64;&#x20;&#x74;&#x6f;&#x20;&#x70;&#x61;&#x69;&#x6e;&#x74;&#x20;&#x6d;&#x65;&#x2e;&#x27;</div>
&gt;&gt;&gt; garcias_car.paint(&#x27;black&#x27;)
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x27;&#x54;&#x65;&#x73;&#x6c;&#x61;&#x20;&#x4d;&#x6f;&#x64;&#x65;&#x6c;&#x20;&#x53;&#x20;&#x69;&#x73;&#x20;&#x6e;&#x6f;&#x77;&#x20;&#x62;&#x6c;&#x61;&#x63;&#x6b;&#x27;</div>
&gt;&gt;&gt; garcias_car.color
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x27;&#x62;&#x6c;&#x61;&#x63;&#x6b;&#x27;</div></code></pre>
        <button id='prompt-1' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
         -->
<!--
<pre><code>&gt;&gt;&gt; garcias_car = Car(&#x27;Tesla&#x27;, &#x27;Model S&#x27;)
&gt;&gt;&gt; garcias_truck = MonsterTruck(&#x27;Monster Truck&#x27;, &#x27;XXL&#x27;)
&gt;&gt;&gt; garcias_car.size
<div class="alt prompt-2">______</div><div class="solution prompt-2">&#x27;&#x54;&#x69;&#x6e;&#x79;&#x27;</div>
&gt;&gt;&gt; garcias_truck.size
<div class="alt prompt-2">______</div><div class="solution prompt-2">&#x27;&#x4d;&#x6f;&#x6e;&#x73;&#x74;&#x65;&#x72;&#x27;</div></code></pre>
        <button id='prompt-2' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        
-->
<pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car = Car(<span class="hljs-string">'Tesla'</span>, <span class="hljs-string">'Model S'</span>)
<span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car.model
<div class="alt prompt-3">_____<span class="hljs-number">_</span></div><div class="solution prompt-3"><span class="hljs-string">'Model S'</span></div>
<span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car.gas = <span class="hljs-number">10</span>
<span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car.drive()
<div class="alt prompt-3">_____<span class="hljs-number">_</span></div><div class="solution prompt-3"><span class="hljs-string">'Tesla Model S goes vroom!'</span></div>
<span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car.drive()
<div class="alt prompt-3">_____<span class="hljs-number">_</span></div><div class="solution prompt-3"><span class="hljs-string">'Cannot drive!'</span></div>
<span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car.fill_gas()
<div class="alt prompt-3">_____<span class="hljs-number">_</span></div><div class="solution prompt-3"><span class="hljs-string">'Gas level: 20'</span></div>
<span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car.gas
<div class="alt prompt-3">______</div><div class="solution prompt-3">2<span class="hljs-number">0</span></div>
<span class="hljs-meta">&gt;&gt;</span>&gt; Car.gas
<div class="alt prompt-3">______</div><div class="solution prompt-3">3<span class="hljs-number">0</span></div></code></pre>
        <button id="prompt-3" class="btn btn-outline btn-lg solutiontoggle prompt" style="display: inline-block;">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<!-- <pre><code>&gt;&gt;&gt; Car.headlights
<div class="alt prompt-4">______</div><div class="solution prompt-4">&#x32;</div>
&gt;&gt;&gt; garcias_car.headlights
<div class="alt prompt-4">______</div><div class="solution prompt-4">&#x32;</div>
&gt;&gt;&gt; Car.headlights = 3
&gt;&gt;&gt; garcias_car.headlights
<div class="alt prompt-4">______</div><div class="solution prompt-4">&#x33;</div>
&gt;&gt;&gt; garcias_car.headlights = 2
&gt;&gt;&gt; Car.headlights
<div class="alt prompt-4">______</div><div class="solution prompt-4">&#x33;</div></code></pre>
        <button id='prompt-4' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
         -->

<pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car = Car(<span class="hljs-string">'Tesla'</span>, <span class="hljs-string">'Model S'</span>)
<span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car.wheels = <span class="hljs-number">2</span>
<span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car.wheels
<div class="alt prompt-5">______</div><div class="solution prompt-5">2</div>
<span class="hljs-meta">&gt;&gt;</span>&gt; Car.num_wheels
<div class="alt prompt-5">______</div><div class="solution prompt-5">4</div>
<span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car.drive()
<div class="alt prompt-5">_____<span class="hljs-number">_</span></div><div class="solution prompt-5"><span class="hljs-string">'Cannot drive!'</span></div>
<span class="hljs-meta">&gt;&gt;</span>&gt; Car.drive()
<div class="alt prompt-5">______</div><div class="solution prompt-5">Error (TypeError)</div>
<span class="hljs-meta">&gt;&gt;</span>&gt; Car.drive(deneros_car)
<div class="alt prompt-5">_____<span class="hljs-number">_</span></div><div class="solution prompt-5"><span class="hljs-string">'Cannot drive!'</span></div></code></pre>
        <button id="prompt-5" class="btn btn-outline btn-lg solutiontoggle prompt" style="display: inline-block;">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        
<!--

<pre><code>&gt;&gt;&gt; MonsterTruck.drive(garcias_car)
Error (AttributeError)</code></pre>

-->

<p>For the following, we reference the <code>MonsterTruck</code> class, also in <code>car.py</code>:</p>

<pre><code class="hljs ruby"> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MonsterTruck</span>(<span class="hljs-title">Car</span>):</span>
     size = <span class="hljs-string">'Monster'</span>

     <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">rev</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span>:
         print(<span class="hljs-string">'Vroom! This Monster Truck is huge!'</span>)

     <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">drive</span><span class="hljs-params">(<span class="hljs-keyword">self</span>)</span></span>:
         <span class="hljs-keyword">self</span>.rev()
         <span class="hljs-keyword">return</span> Car.drive(<span class="hljs-keyword">self</span>)</code></pre>

<pre><code class="hljs ruby"><span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car = MonsterTruck(<span class="hljs-string">'Monster'</span>, <span class="hljs-string">'Batmobile'</span>)
<span class="hljs-meta">&gt;&gt;</span>&gt; deneros_car.drive()
<div class="alt prompt-6">______</div><div class="solution prompt-6">Vroom! This Monster Truck is huge!
<span class="hljs-string">'Monster Batmobile goes vroom!'</span></div>
<span class="hljs-meta">&gt;&gt;</span>&gt; Car.drive(deneros_car)
<div class="alt prompt-6">_____<span class="hljs-number">_</span></div><div class="solution prompt-6"><span class="hljs-string">'Monster Batmobile goes vroom!'</span></div>
<span class="hljs-meta">&gt;&gt;</span>&gt; MonsterTruck.drive(deneros_car)
<div class="alt prompt-6">______</div><div class="solution prompt-6">Vroom! This Monster Truck is huge!
<span class="hljs-string">'Monster Batmobile goes vroom!'</span></div>
<span class="hljs-meta">&gt;&gt;</span>&gt; Car.rev(deneros_car)
<div class="alt prompt-6">______</div><div class="solution prompt-6">Error (AttributeError)</div></code></pre>
        <button id="prompt-6" class="btn btn-outline btn-lg solutiontoggle prompt" style="display: inline-block;">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        
<!--
<pre><code>&gt;&gt;&gt; class FoodTruck(MonsterTruck):
...    delicious = &#x27;meh&#x27;
...    def serve(self):
...        if FoodTruck.size == &#x27;delicious&#x27;:
...            print(&#x27;Yum!&#x27;)
...        if self.food != &#x27;Tacos&#x27;:
...            return &#x27;But no tacos...&#x27;
...        else:
...            return &#x27;Mmm!&#x27;
&gt;&gt;&gt; taco_truck = FoodTruck(&#x27;Tacos&#x27;, &#x27;Truck&#x27;)
&gt;&gt;&gt; taco_truck.food = &#x27;Guacamole&#x27;
&gt;&gt;&gt; taco_truck.serve()
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x27;&#x42;&#x75;&#x74;&#x20;&#x6e;&#x6f;&#x20;&#x74;&#x61;&#x63;&#x6f;&#x73;&#x2e;&#x2e;&#x2e;&#x27;</div>
&gt;&gt;&gt; taco_truck.food = taco_truck.make
&gt;&gt;&gt; FoodTruck.size = taco_truck.delicious
&gt;&gt;&gt; taco_truck.serve()
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x27;&#x4d;&#x6d;&#x6d;&#x21;&#x27;</div>
&gt;&gt;&gt; taco_truck.size = &#x27;delicious&#x27;
&gt;&gt;&gt; taco_truck.serve()
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x27;&#x4d;&#x6d;&#x6d;&#x21;&#x27;</div>
&gt;&gt;&gt; FoodTruck.pop_tire()
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x45;&#x72;&#x72;&#x6f;&#x72;</div>
&gt;&gt;&gt; FoodTruck.pop_tire(taco_truck)
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x4e;&#x6f;&#x74;&#x68;&#x69;&#x6e;&#x67;</div>
&gt;&gt;&gt; taco_truck.drive()
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x56;&#x72;&#x6f;&#x6f;&#x6d;&#x21;&#x20;&#x54;&#x68;&#x69;&#x73;&#x20;&#x4d;&#x6f;&#x6e;&#x73;&#x74;&#x65;&#x72;&#x20;&#x54;&#x72;&#x75;&#x63;&#x6b;&#x20;&#x69;&#x73;&#x20;&#x68;&#x75;&#x67;&#x65;&#x21;&#xa;&#x27;&#x54;&#x61;&#x63;&#x6f;&#x73;&#x20;&#x54;&#x72;&#x75;&#x63;&#x6b;&#x20;&#x63;&#x61;&#x6e;&#x6e;&#x6f;&#x74;&#x20;&#x64;&#x72;&#x69;&#x76;&#x65;&#x21;&#x27;</div></code></pre>
        <button id='prompt-7' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        
-->


<h2 id="magic-the-lambda-ing">Magic: The Lambda-ing</h2>


<p>In the next part of this lab, we will be implementing a card game!</p>

<p>You can start the game by typing:</p>

<pre><code class="hljs css"><span class="hljs-selector-tag">python3</span> <span class="hljs-selector-tag">cardgame</span><span class="hljs-selector-class">.py</span></code></pre>

<p><strong>This game doesn't work yet</strong>. If we run this right now, the code will
error, since we haven't implemented anything yet. When it's working, you
can exit the game and return to the command line with <code>Ctrl-C</code> or <code>Ctrl-D</code>.</p>

<p>This game uses several different files.</p>

<ul>
  <li>Code for all the questions in this lab can be found in <code>classes.py</code>.</li>
  <li>Some utility for the game can be found in <code>cardgame.py</code>, but you won't need
  to open or read this file. This file doesn't actually mutate any instances
  directly - instead, it calls methods of the different classes, maintaining
  a strict abstraction barrier.</li>
  <li>If you want to modify your game later to add your own custom cards and decks,
  you can look in <code>cards.py</code> to see all the standard cards and the default deck;
  here, you can add more cards and change what decks you and your opponent use.
  The cards were not created with balance in mind, so feel free to modify the stats
  and add/remove cards as desired.</li>
</ul>

<p><strong>Rules of the Game</strong> This game is a little involved, though not nearly as much as its namesake. Here's
how it goes:</p>

<p>There are two players. Each player has a hand of cards and a deck, and at the
start of each round, each player draws a card from their deck. If a player's
deck is empty when they try to draw, they will automatically lose the game.
Cards have a name, an attack stat, and a defense stat. Each round, each player
chooses one card to play from their own hands. The card with the higher <em>power</em>
wins the round. Each played card's power value is calculated as follows:</p>

<pre><code class="hljs bash">(player card<span class="hljs-string">'s attack) - (opponent card'</span>s defense) / 2</code></pre>

<p>For example, let's say Player 1 plays a card with 2000 ATK/1000 DEF and Player 2 plays
a card with 1500 ATK/3000 DEF. Their cards' powers are calculated as:</p>

<pre><code class="hljs http"><span class="hljs-attribute">P1</span>: 2000 - 3000/2 = 2000 - 1500 = 500
<span class="hljs-attribute">P2</span>: 1500 - 1000/2 = 1500 - 500 = 1000</code></pre>

<p>so Player 2 would win this round.</p>

<p>The first player to win 8 rounds wins the match!</p>

<p>However, there are a few effects we can add (in the optional questions section) to
make this game a bit more interesting. Cards are split into Tutor, TA, and Professor
types, and each type has a different <em>effect</em> when they're played. All effects are applied
before power is calculated during that round:</p>

<ul>
  <li>A Tutor will cause the opponent to discard and re-draw the first 3 cards in their hand.</li>
  <li>A TA will swap the opponent card's attack and defense.
  <!-- * An Instructor will add 300 attack and defense to all cards in the player's deck, and then
  add a copy of the opponent's card to both the player's deck and the player's hand.--></li>
  <li>A Professor adds the opponent card's attack and defense to all cards in their deck and
  then remove all cards in the opponent's deck that share its attack <em>or</em> defense!</li>
</ul>

<p>These are a lot of rules to remember, so refer back here if you need to review them,
and let's start making the game!</p>

<h3 class="question" id="q3">Q3: Making Cards</h3>

<p>To play a card game, we're going to need to have cards, so let's make some!
We're gonna implement the basics of the <code>Card</code> class first.</p>

<p>First, implement the <code>Card</code> class constructor in <code>classes.py</code>. This constructor
takes three arguments:</p>

<ul>
  <li>the <code>name</code> of the card, a string</li>
  <li>the <code>attack</code> stat of the card, an integer</li>
  <li>the <code>defense</code> stat of the card, an integer</li>
</ul>

<p>Each <code>Card</code> instance should keep track of these values using instance attributes
called <code>name</code>, <code>attack</code>, and <code>defense</code>.</p>

<p>You should also implement the <code>power</code> method in <code>Card</code>, which takes in another card as
an input and calculates the current card's power. Check the Rules section if you want
a refresher on how power is calculated.</p>



<pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Card</span><span class="hljs-params">(object)</span>:</span>
    cardtype = <span class="hljs-string">'Staff'</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, name, attack, defense)</span>:</span>
        <span class="hljs-string">"""
        Create a Card object with a name, attack,
        and defense.
        &gt;&gt;&gt; staff_member = Card('staff', 400, 300)
        &gt;&gt;&gt; staff_member.name
        'staff'
        &gt;&gt;&gt; staff_member.attack
        400
        &gt;&gt;&gt; staff_member.defense
        300
        &gt;&gt;&gt; other_staff = Card('other', 300, 500)
        &gt;&gt;&gt; other_staff.attack
        300
        &gt;&gt;&gt; other_staff.defense
        500
        """</span>
<div class="alt solution-2">        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</div><div class="solution solution-2">        self.name = name
        self.attack = attack
        self.defense = defense</div>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">power</span><span class="hljs-params">(self, other_card)</span>:</span>
        <span class="hljs-string">"""
        Calculate power as:
        (player card's attack) - (opponent card's defense)/2
        where other_card is the opponent's card.
        &gt;&gt;&gt; staff_member = Card('staff', 400, 300)
        &gt;&gt;&gt; other_staff = Card('other', 300, 500)
        &gt;&gt;&gt; staff_member.power(other_staff)
        150.0
        &gt;&gt;&gt; other_staff.power(staff_member)
        150.0
        &gt;&gt;&gt; third_card = Card('third', 200, 400)
        &gt;&gt;&gt; staff_member.power(third_card)
        200.0
        &gt;&gt;&gt; third_card.power(staff_member)
        50.0
        """</span>
<div class="alt solution-2">        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</div><div class="solution solution-2">        <span class="hljs-keyword">return</span> self.attack - other_card.defense / <span class="hljs-number">2</span></div></code></pre>


        <button id="solution-2" class="btn btn-outline btn-lg solutiontoggle solution" style="display: inline-block;">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q Card.__init__
python3 ok -q Card.power</code></pre>

<h3 class="question" id="q4">Q4: Making a Player</h3>
Now that we have cards, we can make a deck, but we still need players to
actually use them. We'll now fill in the implementation of the <code>Player</code> class.

<p>A <code>Player</code> instance has three instance attributes:</p>

<ul>
  <li><code>name</code> is the player's name. When you play the game, you can enter your name,
  which will be converted into a string to be passed to the constructor.</li>
  <li><code>deck</code> is an instance of the <code>Deck</code> class. You can draw from it using
  its <code>.draw()</code> method.</li>
  <li><code>hand</code> is a list of <code>Card</code> instances. Each player should start with 5
  cards in their hand, drawn from their <code>deck</code>. Each card in the hand can be
  selected by its index in the list during the game. When a player draws a new
  card from the deck, it is added to the end of this list.</li>
</ul>

<p>Complete the implementation of the constructor for <code>Player</code> so that <code>self.hand</code>
is set to a list of 5 cards drawn from the player's <code>deck</code>.</p>

<p>Next, implement the <code>draw</code> and <code>play</code> methods in the <code>Player</code> class.  The
<code>draw</code> method draws a card from the deck and adds it to the 
player's hand. The <code>play</code> method removes and returns a card from the player's hand at the
given index.</p>

<blockquote><p>Call <code>deck.draw()</code> when implementing <code>Player.__init__</code> and <code>Player.draw</code>.
Don't worry about how this function works - leave it all to the abstraction!</p></blockquote>



<pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Player</span><span class="hljs-params">(object)</span>:</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self, deck, name)</span>:</span>
        <span class="hljs-string">"""Initialize a Player object.
        A Player starts the game by drawing 5 cards from their deck. Each turn,
        a Player draws another card from the deck and chooses one to play.
        &gt;&gt;&gt; test_card = Card('test', 100, 100)
        &gt;&gt;&gt; test_deck = Deck([test_card.copy() for _ in range(6)])
        &gt;&gt;&gt; test_player = Player(test_deck, 'tester')
        &gt;&gt;&gt; len(test_deck.cards)
        1
        &gt;&gt;&gt; len(test_player.hand)
        5
        """</span>
        self.deck = deck
        self.name = name
<div class="alt solution-3">        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</div><div class="solution solution-3">        self.hand = [deck.draw() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(<span class="hljs-number">5</span>)]</div>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">draw</span><span class="hljs-params">(self)</span>:</span>
        <span class="hljs-string">"""Draw a card from the player's deck and add it to their hand.
        &gt;&gt;&gt; test_card = Card('test', 100, 100)
        &gt;&gt;&gt; test_deck = Deck([test_card.copy() for _ in range(6)])
        &gt;&gt;&gt; test_player = Player(test_deck, 'tester')
        &gt;&gt;&gt; test_player.draw()
        &gt;&gt;&gt; len(test_deck.cards)
        0
        &gt;&gt;&gt; len(test_player.hand)
        6
        """</span>
        <span class="hljs-keyword">assert</span> <span class="hljs-keyword">not</span> self.deck.is_empty(), <span class="hljs-string">'Deck is empty!'</span>
<div class="alt solution-3">        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</div><div class="solution solution-3">        self.hand.append(self.deck.draw())</div>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">play</span><span class="hljs-params">(self, card_index)</span>:</span>
        <span class="hljs-string">"""Remove and return a card from the player's hand at the given index.
        &gt;&gt;&gt; from cards import *
        &gt;&gt;&gt; test_player = Player(standard_deck, 'tester')
        &gt;&gt;&gt; ta1, ta2 = TACard("ta_1", 300, 400), TACard("ta_2", 500, 600)
        &gt;&gt;&gt; tutor1, tutor2 = TutorCard("t1", 200, 500), TutorCard("t2", 600, 400)
        &gt;&gt;&gt; test_player.hand = [ta1, ta2, tutor1, tutor2]
        &gt;&gt;&gt; test_player.play(0) is ta1 
        True
        &gt;&gt;&gt; test_player.play(2) is tutor2 
        True
        &gt;&gt;&gt; len(test_player.hand)
        2
        """</span>
<div class="alt solution-3">        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</div><div class="solution solution-3">        <span class="hljs-keyword">return</span> self.hand.pop(card_index)</div></code></pre>


        <button id="solution-3" class="btn btn-outline btn-lg solutiontoggle solution" style="display: inline-block;">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q Player.__init__
python3 ok -q Player.draw
python3 ok -q Player.play</code></pre>

<p>After you complete this problem, you'll be able to play a working version of
the game! Type</p>

<pre><code class="hljs css"><span class="hljs-selector-tag">python3</span> <span class="hljs-selector-tag">cardgame</span><span class="hljs-selector-class">.py</span></code></pre>

<p>to start a game of Magic: The Lambda-ing!</p>

<p>This version doesn't have the effects for different cards, yet - to get those
working, try out the optional questions below.</p>


<h1 id="optional-questions">Optional Questions</h1>

<p><strong>Note:</strong> These questions use inheritance, which has not been covered in lecture yet. It will be covered on Wednesday, 10/9.</p>

<p>For the following sections, do <strong>not</strong> overwrite any lines already provided in the
code. Additionally, make sure to uncomment any calls to <code>print</code> once you have implemented
each method. These are used to display information to the user, and changing them
may cause you to fail tests that you would otherwise pass.</p>

<h3 class="question" id="q5">Q5: Tutors: Flummox</h3>

<p>To really make this card game interesting, our cards should have effects!
We'll do this with the <code>effect</code> function for cards, which takes
in the opponent card, the current player, and the opponent player.</p>

<p>Implement the <code>effect</code> method for Tutors, which causes the opponent to discard
the first 3 cards in their hand and then draw 3 new cards. Assume there at least 3 cards
in the opponent's hand and at least 3 cards in the opponent's deck.</p>

<p>Remember to uncomment the call to <code>print</code> once you're done!</p>



<pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TutorCard</span><span class="hljs-params">(Card)</span>:</span>
    cardtype = <span class="hljs-string">'Tutor'</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">effect</span><span class="hljs-params">(self, other_card, player, opponent)</span>:</span>
        <span class="hljs-string">"""
        Discard the first 3 cards in the opponent's hand and have
        them draw the same number of cards from their deck.
        &gt;&gt;&gt; from cards import *
        &gt;&gt;&gt; player1, player2 = Player(player_deck, 'p1'), Player(opponent_deck, 'p2')
        &gt;&gt;&gt; other_card = Card('other', 500, 500)
        &gt;&gt;&gt; tutor_test = TutorCard('Tutor', 500, 500)
        &gt;&gt;&gt; initial_deck_length = len(player2.deck.cards)
        &gt;&gt;&gt; tutor_test.effect(other_card, player1, player2)
        p2 discarded and re-drew 3 cards!
        &gt;&gt;&gt; len(player2.hand)
        5
        &gt;&gt;&gt; len(player2.deck.cards) == initial_deck_length - 3
        True
        """</span>
<div class="alt solution-4">        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</div><div class="solution solution-4">        opponent.hand = opponent.hand[<span class="hljs-number">3</span>:]
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):
            opponent.draw()</div>        <span class="hljs-comment">#Uncomment the line below when you've finished implementing this method!</span>
        <span class="hljs-comment">#print('{} discarded and re-drew 3 cards!'.format(opponent.name))</span></code></pre>


        <button id="solution-4" class="btn btn-outline btn-lg solutiontoggle solution" style="display: inline-block;">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q TutorCard.effect</code></pre>

<h3 class="question" id="q6">Q6: TAs: Shift</h3>

<p>Let's add an effect for TAs now! Implement the <code>effect</code> method for TAs, which
swaps the attack and defense of the opponent's card.</p>



<pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TACard</span><span class="hljs-params">(Card)</span>:</span>
    cardtype = <span class="hljs-string">'TA'</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">effect</span><span class="hljs-params">(self, other_card, player, opponent)</span>:</span>
        <span class="hljs-string">"""
        Swap the attack and defense of an opponent's card.
        &gt;&gt;&gt; from cards import *
        &gt;&gt;&gt; player1, player2 = Player(player_deck, 'p1'), Player(opponent_deck, 'p2')
        &gt;&gt;&gt; other_card = Card('other', 300, 600)
        &gt;&gt;&gt; ta_test = TACard('TA', 500, 500)
        &gt;&gt;&gt; ta_test.effect(other_card, player1, player2)
        &gt;&gt;&gt; other_card.attack
        600
        &gt;&gt;&gt; other_card.defense
        300
        """</span>
<div class="alt solution-5">        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</div><div class="solution solution-5">        other_card.attack, other_card.defense = other_card.defense, other_card.attack</div></code></pre>


        <button id="solution-5" class="btn btn-outline btn-lg solutiontoggle solution" style="display: inline-block;">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q TACard.effect</code></pre>

<h3 class="question" id="q7">Q7: The Professor Arrives</h3>

<p>A new challenger has appeared! Implement the <code>effect</code> method for the Professor,
who adds the opponent card's attack and defense to all cards in the player's
deck and then removes <em>all</em> cards in the opponent's deck that have the same
attack or defense as the opponent's card.</p>

<blockquote><p><em>Note:</em> You might run into trouble when you mutate a list as you're iterating
through it. Try iterating through a copy instead! You can use slicing to copy
a list:</p>

<pre><code class="hljs ruby">  <span class="hljs-meta">&gt;&gt;&gt; </span>lst = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
  <span class="hljs-meta">&gt;&gt;&gt; </span>copy = lst[<span class="hljs-symbol">:</span>]
  <span class="hljs-meta">&gt;&gt;&gt; </span>copy
  [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
  <span class="hljs-meta">&gt;&gt;&gt; </span>copy is lst
  False</code></pre></blockquote>



<pre><code class="hljs python"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProfessorCard</span><span class="hljs-params">(Card)</span>:</span>
    cardtype = <span class="hljs-string">'Professor'</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">effect</span><span class="hljs-params">(self, other_card, player, opponent)</span>:</span>
        <span class="hljs-string">"""
        Adds the attack and defense of the opponent's card to
        all cards in the player's deck, then removes all cards
        in the opponent's deck that share an attack or defense
        stat with the opponent's card.
        &gt;&gt;&gt; test_card = Card('card', 300, 300)
        &gt;&gt;&gt; professor_test = ProfessorCard('Professor', 500, 500)
        &gt;&gt;&gt; opponent_card = test_card.copy()
        &gt;&gt;&gt; test_deck = Deck([test_card.copy() for _ in range(8)])
        &gt;&gt;&gt; player1, player2 = Player(test_deck.copy(), 'p1'), Player(test_deck.copy(), 'p2')
        &gt;&gt;&gt; professor_test.effect(opponent_card, player1, player2)
        3 cards were discarded from p2's deck!
        &gt;&gt;&gt; [(card.attack, card.defense) for card in player1.deck.cards]
        [(600, 600), (600, 600), (600, 600)]
        &gt;&gt;&gt; len(player2.deck.cards)
        0
        """</span>
        orig_opponent_deck_length = len(opponent.deck.cards)
<div class="alt solution-6">        <span class="hljs-string">"*** YOUR CODE HERE ***"</span>
</div><div class="solution solution-6">        <span class="hljs-keyword">for</span> card <span class="hljs-keyword">in</span> player.deck.cards:
            card.attack += other_card.attack
            card.defense += other_card.defense
        <span class="hljs-keyword">for</span> card <span class="hljs-keyword">in</span> opponent.deck.cards[:]:
            <span class="hljs-keyword">if</span> card.attack == other_card.attack <span class="hljs-keyword">or</span> card.defense == other_card.defense:
                opponent.deck.cards.remove(card)</div>        discarded = orig_opponent_deck_length - len(opponent.deck.cards)
        <span class="hljs-keyword">if</span> discarded:
            <span class="hljs-comment">#Uncomment the line below when you've finished implementing this method!</span>
            <span class="hljs-comment">#print('{} cards were discarded from {}\'s deck!'.format(discarded, opponent.name))</span>
            <span class="hljs-keyword">return</span></code></pre>


        <button id="solution-6" class="btn btn-outline btn-lg solutiontoggle solution" style="display: inline-block;">
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q ProfessorCard.effect</code></pre> 

<p>After you complete this problem, we'll have a fully functional game of Magic:
The Lambda-ing! This doesn't have to be the end, though - we encourage you to
get creative with more card types, effects, and even adding more custom cards
to your deck!</p>

<h3 class="question" id="q8">Q8: Nonlocal Environment Diagram</h3>

<p>Draw the environment diagram that results from running the following code.</p>

<pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">moon</span><span class="hljs-params">(f)</span>:</span>
    sun = <span class="hljs-number">0</span>
    moon = [sun]
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span><span class="hljs-params">(x)</span>:</span>
        <span class="hljs-keyword">nonlocal</span> sun, moon
        <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sun</span><span class="hljs-params">(sun)</span>:</span>
            <span class="hljs-keyword">return</span> [sun]
        y = f(x)
        moon.append(sun(y))
        <span class="hljs-keyword">return</span> moon[<span class="hljs-number">0</span>] <span class="hljs-keyword">and</span> moon[<span class="hljs-number">1</span>]
    <span class="hljs-keyword">return</span> run

moon(<span class="hljs-keyword">lambda</span> x: moon)(<span class="hljs-number">1</span>)</code></pre>

<p>After you've done it on your own, generate an environment diagram in <a href="http://tutor.cs61a.org/">python tutor</a> to check your answer.</p>

  </div>

  <div class="col-md-3 sticky">
    <nav class="hidden-print hidden-sm hidden-xs sidebar">
      <ul class="nav nav-stacked noselect">
  <li><a href="https://cs61a.org/lab/lab06/#topics">Topics</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/lab/lab06/#nonlocal">Nonlocal</a></li>
    <li><a href="https://cs61a.org/lab/lab06/#object-oriented-programming">Object-Oriented Programming</a></li>
  </ul>
  <li><a href="https://cs61a.org/lab/lab06/#required-questions">Required Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/lab/lab06/#nonlocal-codewriting">Nonlocal Codewriting</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab06/#q1">Q1: Make Adder Increasing</a></li>
    </ul>
    <li><a href="https://cs61a.org/lab/lab06/#wwpd">WWPD</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab06/#q2">Q2: Using the Car class</a></li>
    </ul>
    <li><a href="https://cs61a.org/lab/lab06/#magic-the-lambda-ing">Magic: The Lambda-ing</a></li>
    <ul class="nav nav-stacked noselect">
      <li><a href="https://cs61a.org/lab/lab06/#q3">Q3: Making Cards</a></li>
      <li><a href="https://cs61a.org/lab/lab06/#q4">Q4: Making a Player</a></li>
    </ul>
  </ul>
  <li><a href="https://cs61a.org/lab/lab06/#optional-questions">Optional Questions</a></li>
  <ul class="nav nav-stacked noselect">
    <li><a href="https://cs61a.org/lab/lab06/#q5">Q5: Tutors: Flummox</a></li>
    <li><a href="https://cs61a.org/lab/lab06/#q6">Q6: TAs: Shift</a></li>
    <li><a href="https://cs61a.org/lab/lab06/#q7">Q7: The Professor Arrives</a></li>
    <li><a href="https://cs61a.org/lab/lab06/#q8">Q8: Nonlocal Environment Diagram</a></li>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/weekly.html">Weekly Schedule</a></li>
            <li><a href="https://cs61a.org/office-hours.html">Office Hours</a></li>
            <li><a href="https://cs61a.org/staff.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/resources.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/studying.html">Studying Guide</a></li>
            <li><a href="https://cs61a.org/articles/debugging.html">Debugging Guide</a></li>
            <li><a href="https://cs61a.org/articles/composition.html">Composition Guide</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="https://cs61a.org/articles/about.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="https://cs61a.org/articles/about.html#assignments">Assignments</a></li>
            <li><a href="https://cs61a.org/articles/about.html#exams">Exams</a></li>
            <li><a href="https://cs61a.org/articles/about.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    


<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    console.log(target);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      // window.scrollTo(0, 0);
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    event.preventDefault();
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      goToId(this.hash);
      document.location.hash = this.hash;
    } else {
      window.open(this.href);
    }
  });
</script>


<script type="text/javascript" src="./Lab 6_ Nonlocal &amp; Object-Oriented Programming _ CS 61A Fall 2019_files/config.js.下载"></script>
<script>
/*
This code is duplicated in lab-check-in.html. Doesn't work if we move it to a separate
file because of JQuery document ready concurrency issues.
*/
$(function() {
  var staging_domains = ['staging.cs61a.org', 'solutions.cs61a.org', 'localhost', '127.0.0.1'];
  var host = window.location.hostname;
  var staging = staging_domains.indexOf(host) != -1;
  staging = staging || (host.endsWith('.pullrequests.cs61a.org') && !host.startsWith('last-build.'));

  var after_due_date = new Date(1571209199999) < new Date();
  var before_end_date = new Date() <= new Date(endDate);
  var release_solutions = (staging || after_due_date) && before_end_date;

  if (release_solutions) {
    $('.solutiontoggle').css('display', 'inline-block');
    $('.solutiontoggle').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
  }
  $('.alwaystoggle').css('display', 'inline-block');
  $('.alwaystoggle').click(function() {
    var solution_id = $(this).attr('id');
    $('div.' + solution_id).slideToggle(600);
  });
});
</script>


  
<div id="download_plus_animation"></div></body></html>